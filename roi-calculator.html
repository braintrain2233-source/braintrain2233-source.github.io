<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤–æ³¨åŒ–ROIè¨ˆç®—ãƒ„ãƒ¼ãƒ« - æŠ•è³‡å¯¾åŠ¹æœã‚’å¯è¦–åŒ–</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            border-radius: 15px;
        }

        .nav-breadcrumb {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .nav-breadcrumb a {
            color: #3498db;
            text-decoration: none;
            margin: 0 5px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }

        .input-section, .results-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-weight: bold;
            color: #34495e;
            margin-bottom: 5px;
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.2);
        }

        .input-unit {
            color: #7f8c8d;
            font-size: 14px;
            margin-top: 5px;
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .result-card {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .result-card.positive {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border: 2px solid #27ae60;
        }

        .result-card.negative {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            border: 2px solid #e67e22;
        }

        .result-card.warning {
            background: linear-gradient(135deg, #ff9a9e, #fecfef);
            border: 2px solid #e74c3c;
        }

        .result-number {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .result-label {
            font-size: 14px;
            color: #2c3e50;
        }

        .chart-container {
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .comparison-chart {
            display: flex;
            justify-content: space-around;
            align-items: end;
            height: 200px;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .chart-bar {
            width: 80px;
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-radius: 5px 5px 0 0;
            display: flex;
            flex-direction: column;
            justify-content: end;
            align-items: center;
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
            position: relative;
        }

        .chart-bar:hover {
            transform: scale(1.05);
        }

        .chart-label {
            color: #2c3e50;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
        }

        .scenario-tabs {
            display: flex;
            margin-bottom: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            padding: 5px;
        }

        .scenario-tab {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .scenario-tab.active {
            background: white;
            color: #3498db;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .recommendations {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .recommendations h3 {
            margin-bottom: 15px;
        }

        .recommendations ul {
            list-style: none;
        }

        .recommendations li {
            margin: 10px 0;
            padding: 10px 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            border-left: 4px solid white;
        }

        .timeline-visualization {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .timeline-month {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        .timeline-month:hover {
            background: #e3f2fd;
            transform: translateX(5px);
        }

        .month-number {
            font-size: 18px;
            font-weight: bold;
            color: #3498db;
            min-width: 80px;
        }

        .month-data {
            flex-grow: 1;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .alert-box {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            border-color: #27ae60;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #f39c12;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #e74c3c;
            color: #721c24;
        }

        @media (max-width: 768px) {
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            .results-grid {
                grid-template-columns: 1fr;
            }
            .comparison-chart {
                flex-direction: column;
                height: auto;
                gap: 15px;
            }
            .chart-bar {
                width: 100%;
                height: 60px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="nav-breadcrumb">
            <a href="index.html">ãƒ›ãƒ¼ãƒ </a> > <a href="navigation.html">ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³</a> > ROIè¨ˆç®—ãƒ„ãƒ¼ãƒ«
        </div>

        <div class="header">
            <h1>ğŸ“Š å¤–æ³¨åŒ–ROIè¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>
            <p>å¤–æ³¨åŒ–ã®æŠ•è³‡å¯¾åŠ¹æœã‚’æ­£ç¢ºã«è¨ˆç®—ã—ã€æ„æ€æ±ºå®šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™</p>
        </div>

        <div class="scenario-tabs">
            <button class="scenario-tab active" onclick="switchScenario('conservative')">ä¿å®ˆçš„ã‚·ãƒŠãƒªã‚ª</button>
            <button class="scenario-tab" onclick="switchScenario('realistic')">ç¾å®Ÿçš„ã‚·ãƒŠãƒªã‚ª</button>
            <button class="scenario-tab" onclick="switchScenario('optimistic')">æ¥½è¦³çš„ã‚·ãƒŠãƒªã‚ª</button>
        </div>

        <div class="calculator-grid">
            <div class="input-section">
                <div class="section-title">ğŸ’¼ ç¾åœ¨ã®çŠ¶æ³ã‚’å…¥åŠ›</div>

                <div class="input-group">
                    <label class="input-label">ç¾åœ¨ã®æœˆé–“å£²ä¸Š</label>
                    <input type="number" id="currentRevenue" class="input-field" placeholder="500000" value="500000">
                    <div class="input-unit">å††/æœˆ</div>
                </div>

                <div class="input-group">
                    <label class="input-label">ç¾åœ¨ã®æœˆé–“ä½œæ¥­æ™‚é–“</label>
                    <input type="number" id="currentWorkHours" class="input-field" placeholder="120" value="120">
                    <div class="input-unit">æ™‚é–“/æœˆ</div>
                </div>

                <div class="input-group">
                    <label class="input-label">ã‚ãªãŸã®æ™‚çµ¦ä¾¡å€¤</label>
                    <input type="number" id="hourlyValue" class="input-field" placeholder="3000" value="3000">
                    <div class="input-unit">å††/æ™‚é–“ï¼ˆã‚ãªãŸãŒä»–ã®ä»•äº‹ã§ç¨¼ã’ã‚‹æ™‚çµ¦ï¼‰</div>
                </div>

                <div class="input-group">
                    <label class="input-label">ç¾åœ¨ã®æœˆé–“çµŒè²»</label>
                    <input type="number" id="currentExpenses" class="input-field" placeholder="100000" value="100000">
                    <div class="input-unit">å††/æœˆ</div>
                </div>

                <div class="section-title" style="margin-top: 30px;">ğŸ¯ å¤–æ³¨åŒ–è¨ˆç”»ã‚’å…¥åŠ›</div>

                <div class="input-group">
                    <label class="input-label">å¤–æ³¨äºˆå®šä½œæ¥­æ™‚é–“</label>
                    <input type="number" id="outsourcedHours" class="input-field" placeholder="80" value="80">
                    <div class="input-unit">æ™‚é–“/æœˆï¼ˆå¤–æ³¨ã§å‰Šæ¸›ã—ãŸã„ä½œæ¥­æ™‚é–“ï¼‰</div>
                </div>

                <div class="input-group">
                    <label class="input-label">å¤–æ³¨è²»ç”¨ï¼ˆå›ºå®šè²»ï¼‰</label>
                    <input type="number" id="outsourcingCostFixed" class="input-field" placeholder="100000" value="100000">
                    <div class="input-unit">å††/æœˆ</div>
                </div>

                <div class="input-group">
                    <label class="input-label">å¤–æ³¨è²»ç”¨ï¼ˆå¤‰å‹•è²»ï¼‰</label>
                    <input type="number" id="outsourcingCostVariable" class="input-field" placeholder="50000" value="50000">
                    <div class="input-unit">å††/æœˆ</div>
                </div>

                <div class="input-group">
                    <label class="input-label">å¤–æ³¨åŒ–ã«ã‚ˆã‚‹å£²ä¸Šå‘ä¸Šäºˆæƒ³</label>
                    <input type="number" id="revenueIncrease" class="input-field" placeholder="200000" value="200000">
                    <div class="input-unit">å††/æœˆï¼ˆç©ºã„ãŸæ™‚é–“ã§æ–°è¦é–‹æ‹“ç­‰ï¼‰</div>
                </div>

                <button class="calculate-btn" onclick="calculateROI()">ğŸ“Š ROIã‚’è¨ˆç®—ã™ã‚‹</button>
            </div>

            <div class="results-section">
                <div class="section-title">ğŸ“ˆ è¨ˆç®—çµæœ</div>
                
                <div id="results-content">
                    <div class="alert-box alert-warning">
                        <strong>å·¦å´ã®å…¥åŠ›æ¬„ã«æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ã€ŒROIã‚’è¨ˆç®—ã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container" id="chart-container" style="display: none;">
            <div class="section-title">ğŸ“Š Before/Afteræ¯”è¼ƒ</div>
            <div class="comparison-chart" id="comparison-chart">
                <!-- ãƒãƒ£ãƒ¼ãƒˆãŒã“ã“ã«å‹•çš„ç”Ÿæˆã•ã‚Œã¾ã™ -->
            </div>
        </div>

        <div class="timeline-visualization" id="timeline-container" style="display: none;">
            <div class="section-title">â° 12ãƒ¶æœˆé–“ã®åç›Šäºˆæ¸¬</div>
            <div id="timeline-content">
                <!-- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãŒã“ã“ã«å‹•çš„ç”Ÿæˆã•ã‚Œã¾ã™ -->
            </div>
        </div>

        <div class="recommendations" id="recommendations" style="display: none;">
            <h3>ğŸ’¡ ã‚ãªãŸã¸ã®ãŠã™ã™ã‚ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h3>
            <ul id="recommendation-list">
                <!-- æ¨å¥¨äº‹é …ãŒã“ã“ã«å‹•çš„ç”Ÿæˆã•ã‚Œã¾ã™ -->
            </ul>
        </div>
    </div>

    <script>
        let currentScenario = 'realistic';

        const scenarios = {
            conservative: {
                revenueMultiplier: 0.8,
                efficiencyMultiplier: 0.7,
                riskBuffer: 1.3
            },
            realistic: {
                revenueMultiplier: 1.0,
                efficiencyMultiplier: 1.0,
                riskBuffer: 1.0
            },
            optimistic: {
                revenueMultiplier: 1.3,
                efficiencyMultiplier: 1.4,
                riskBuffer: 0.8
            }
        };

        function switchScenario(scenario) {
            currentScenario = scenario;
            document.querySelectorAll('.scenario-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (document.getElementById('results-content').children.length > 1) {
                calculateROI();
            }
        }

        function calculateROI() {
            // å…¥åŠ›å€¤ã®å–å¾—
            const currentRevenue = parseFloat(document.getElementById('currentRevenue').value) || 0;
            const currentWorkHours = parseFloat(document.getElementById('currentWorkHours').value) || 0;
            const hourlyValue = parseFloat(document.getElementById('hourlyValue').value) || 0;
            const currentExpenses = parseFloat(document.getElementById('currentExpenses').value) || 0;
            const outsourcedHours = parseFloat(document.getElementById('outsourcedHours').value) || 0;
            const outsourcingCostFixed = parseFloat(document.getElementById('outsourcingCostFixed').value) || 0;
            const outsourcingCostVariable = parseFloat(document.getElementById('outsourcingCostVariable').value) || 0;
            const revenueIncrease = parseFloat(document.getElementById('revenueIncrease').value) || 0;

            // ã‚·ãƒŠãƒªã‚ªè¨­å®šã®é©ç”¨
            const scenario = scenarios[currentScenario];
            const adjustedRevenueIncrease = revenueIncrease * scenario.revenueMultiplier;
            const adjustedOutsourcedHours = outsourcedHours * scenario.efficiencyMultiplier;
            const adjustedOutsourcingCost = (outsourcingCostFixed + outsourcingCostVariable) * scenario.riskBuffer;

            // è¨ˆç®—
            const currentProfit = currentRevenue - currentExpenses;
            const currentTimeValue = currentWorkHours * hourlyValue;
            
            const newRevenue = currentRevenue + adjustedRevenueIncrease;
            const newExpenses = currentExpenses + adjustedOutsourcingCost;
            const newProfit = newRevenue - newExpenses;
            const timeValueSaved = adjustedOutsourcedHours * hourlyValue;
            const remainingWorkHours = currentWorkHours - adjustedOutsourcedHours;
            const newTimeValue = remainingWorkHours * hourlyValue;

            const totalBenefit = (newProfit - currentProfit) + timeValueSaved;
            const totalInvestment = adjustedOutsourcingCost;
            const roi = totalInvestment > 0 ? ((totalBenefit / totalInvestment) * 100) : 0;
            const paybackPeriod = totalBenefit > 0 ? totalInvestment / totalBenefit : 999;
            const newHourlyRate = newProfit > 0 && remainingWorkHours > 0 ? newProfit / remainingWorkHours : 0;

            // çµæœã®è¡¨ç¤º
            displayResults({
                currentProfit,
                newProfit,
                profitIncrease: newProfit - currentProfit,
                timeValueSaved,
                totalBenefit,
                totalInvestment,
                roi,
                paybackPeriod,
                currentHourlyRate: currentWorkHours > 0 ? currentProfit / currentWorkHours : 0,
                newHourlyRate,
                efficiencyImprovement: currentWorkHours > 0 ? ((adjustedOutsourcedHours / currentWorkHours) * 100) : 0,
                remainingWorkHours,
                currentWorkHours,
                currentRevenue,
                newRevenue
            });

            generateChart({
                currentProfit,
                newProfit,
                currentWorkHours,
                remainingWorkHours,
                currentRevenue,
                newRevenue
            });

            generateTimeline({
                monthlyProfit: newProfit - currentProfit,
                monthlyInvestment: adjustedOutsourcingCost,
                paybackPeriod
            });

            generateRecommendations({
                roi,
                paybackPeriod,
                efficiencyImprovement: ((adjustedOutsourcedHours / currentWorkHours) * 100),
                profitIncrease: newProfit - currentProfit
            });
        }

        function displayResults(data) {
            const resultsContent = document.getElementById('results-content');
            
            let roiClass = 'positive';
            if (data.roi < 50) roiClass = 'warning';
            if (data.roi < 0) roiClass = 'negative';
            
            let paybackClass = 'positive';
            if (data.paybackPeriod > 12) paybackClass = 'warning';
            if (data.paybackPeriod > 24) paybackClass = 'negative';

            resultsContent.innerHTML = `
                <div class="results-grid">
                    <div class="result-card ${roiClass}">
                        <div class="result-number">${data.roi.toFixed(1)}%</div>
                        <div class="result-label">æŠ•è³‡åç›Šç‡ï¼ˆROIï¼‰</div>
                    </div>
                    <div class="result-card ${paybackClass}">
                        <div class="result-number">${data.paybackPeriod < 999 ? data.paybackPeriod.toFixed(1) : 'âˆ'}</div>
                        <div class="result-label">å›åæœŸé–“ï¼ˆãƒ¶æœˆï¼‰</div>
                    </div>
                    <div class="result-card positive">
                        <div class="result-number">Â¥${data.profitIncrease.toLocaleString()}</div>
                        <div class="result-label">æœˆé–“åˆ©ç›Šå‘ä¸Š</div>
                    </div>
                    <div class="result-card positive">
                        <div class="result-number">${data.efficiencyImprovement.toFixed(0)}%</div>
                        <div class="result-label">ä½œæ¥­åŠ¹ç‡åŒ–ç‡</div>
                    </div>
                    <div class="result-card positive">
                        <div class="result-number">Â¥${data.timeValueSaved.toLocaleString()}</div>
                        <div class="result-label">æ™‚é–“ä¾¡å€¤å‰µå‡º</div>
                    </div>
                    <div class="result-card positive">
                        <div class="result-number">Â¥${data.newHourlyRate.toFixed(0)}</div>
                        <div class="result-label">æ–°ã—ã„æ™‚çµ¦åŠ¹ç‡</div>
                    </div>
                </div>
                
                ${data.roi >= 100 ? `
                    <div class="alert-box alert-success">
                        <strong>âœ… å¤–æ³¨åŒ–æ¨å¥¨ï¼</strong><br>
                        ROI ${data.roi.toFixed(1)}% ã¯éå¸¸ã«å„ªç§€ãªæŠ•è³‡ã§ã™ã€‚ã™ãã«å¤–æ³¨åŒ–ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
                    </div>
                ` : data.roi >= 50 ? `
                    <div class="alert-box alert-warning">
                        <strong>âš ï¸ æ…é‡ã«æ¤œè¨</strong><br>
                        ROI ${data.roi.toFixed(1)}% ã¯æ‚ªãã‚ã‚Šã¾ã›ã‚“ãŒã€ãƒªã‚¹ã‚¯è¦å› ã‚‚è€ƒæ…®ã—ã¦æ®µéšçš„ã«é€²ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
                    </div>
                ` : `
                    <div class="alert-box alert-danger">
                        <strong>âŒ æ¡ä»¶è¦‹ç›´ã—æ¨å¥¨</strong><br>
                        ç¾åœ¨ã®æ¡ä»¶ã§ã¯æŠ•è³‡åŠ¹æœãŒä½ã„ã§ã™ã€‚å¤–æ³¨è²»ç”¨ã®å‰Šæ¸›ã‚„å£²ä¸Šå‘ä¸Šç­–ã‚’å†æ¤œè¨ã—ã¦ãã ã•ã„ã€‚
                    </div>
                `}
            `;
        }

        function generateChart(data) {
            const chartContainer = document.getElementById('chart-container');
            const comparisonChart = document.getElementById('comparison-chart');
            
            chartContainer.style.display = 'block';
            
            const maxValue = Math.max(data.currentRevenue, data.newRevenue, data.currentProfit, data.newProfit, data.currentWorkHours * 1000, data.remainingWorkHours * 1000);
            
            comparisonChart.innerHTML = `
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.currentRevenue / maxValue) * 150}px; background: linear-gradient(135deg, #e74c3c, #c0392b);">
                        Â¥${(data.currentRevenue / 10000).toFixed(0)}ä¸‡
                    </div>
                    <div class="chart-label">ç¾åœ¨ã®å£²ä¸Š</div>
                </div>
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.newRevenue / maxValue) * 150}px; background: linear-gradient(135deg, #27ae60, #229954);">
                        Â¥${(data.newRevenue / 10000).toFixed(0)}ä¸‡
                    </div>
                    <div class="chart-label">å¤–æ³¨åŒ–å¾Œå£²ä¸Š</div>
                </div>
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.currentProfit / maxValue) * 150}px; background: linear-gradient(135deg, #f39c12, #d68910);">
                        Â¥${(data.currentProfit / 10000).toFixed(0)}ä¸‡
                    </div>
                    <div class="chart-label">ç¾åœ¨ã®åˆ©ç›Š</div>
                </div>
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.newProfit / maxValue) * 150}px; background: linear-gradient(135deg, #3498db, #2980b9);">
                        Â¥${(data.newProfit / 10000).toFixed(0)}ä¸‡
                    </div>
                    <div class="chart-label">å¤–æ³¨åŒ–å¾Œåˆ©ç›Š</div>
                </div>
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.currentWorkHours / (maxValue/1000)) * 150}px; background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                        ${data.currentWorkHours}h
                    </div>
                    <div class="chart-label">ç¾åœ¨ã®ä½œæ¥­æ™‚é–“</div>
                </div>
                <div style="text-align: center;">
                    <div class="chart-bar" style="height: ${(data.remainingWorkHours / (maxValue/1000)) * 150}px; background: linear-gradient(135deg, #1abc9c, #16a085);">
                        ${data.remainingWorkHours}h
                    </div>
                    <div class="chart-label">å¤–æ³¨åŒ–å¾Œä½œæ¥­æ™‚é–“</div>
                </div>
            `;
        }

        function generateTimeline(data) {
            const timelineContainer = document.getElementById('timeline-container');
            const timelineContent = document.getElementById('timeline-content');
            
            timelineContainer.style.display = 'block';
            
            let cumulativeProfit = 0;
            let timelineHTML = '';
            
            for (let month = 1; month <= 12; month++) {
                cumulativeProfit += data.monthlyProfit - data.monthlyInvestment;
                const breakeven = cumulativeProfit >= 0;
                
                timelineHTML += `
                    <div class="timeline-month" style="border-left-color: ${breakeven ? '#27ae60' : '#e74c3c'}">
                        <div class="month-number">${month}ãƒ¶æœˆç›®</div>
                        <div class="month-data">
                            <div><strong>æœˆé–“åç›Šï¼š</strong>Â¥${(data.monthlyProfit - data.monthlyInvestment).toLocaleString()}</div>
                            <div><strong>ç´¯è¨ˆåç›Šï¼š</strong>Â¥${cumulativeProfit.toLocaleString()}</div>
                            <div><strong>çŠ¶æ³ï¼š</strong>${breakeven ? 'âœ… é»’å­—åŒ–' : 'â³ æŠ•è³‡å›åä¸­'}</div>
                        </div>
                    </div>
                `;
            }
            
            timelineContent.innerHTML = timelineHTML;
        }

        function generateRecommendations(data) {
            const recommendations = document.getElementById('recommendations');
            const recommendationList = document.getElementById('recommendation-list');
            
            recommendations.style.display = 'block';
            
            let recommendationsHTML = '';
            
            if (data.roi > 100) {
                recommendationsHTML += '<li>ğŸš€ <strong>å³åº§ã«å¤–æ³¨åŒ–é–‹å§‹ï¼š</strong>ROIãŒ100%è¶…ã®ãŸã‚ã€ã™ãã«å®Ÿè¡Œã«ç§»ã—ã¾ã—ã‚‡ã†</li>';
                recommendationsHTML += '<li>ğŸ“ˆ <strong>æ®µéšçš„æ‹¡å¤§ï¼š</strong>æˆåŠŸã—ãŸã‚‰ä»–ã®æ¥­å‹™ã‚‚å¤–æ³¨åŒ–ç¯„å›²ã‚’åºƒã’ã¦ã¿ã¾ã—ã‚‡ã†</li>';
            } else if (data.roi > 50) {
                recommendationsHTML += '<li>âš ï¸ <strong>ãƒ†ã‚¹ãƒˆé‹ç”¨ã‹ã‚‰é–‹å§‹ï¼š</strong>å°è¦æ¨¡ã§ãƒ†ã‚¹ãƒˆã—ã¦ã‹ã‚‰æœ¬æ ¼å°å…¥ã—ã¾ã—ã‚‡ã†</li>';
                recommendationsHTML += '<li>ğŸ” <strong>ã‚³ã‚¹ãƒˆæœ€é©åŒ–ï¼š</strong>å¤–æ³¨è²»ç”¨ã‚’ã•ã‚‰ã«å‰Šæ¸›ã§ãã‚‹ä½™åœ°ãŒãªã„ã‹æ¤œè¨ã—ã¾ã—ã‚‡ã†</li>';
            } else {
                recommendationsHTML += '<li>âŒ <strong>æ¡ä»¶è¦‹ç›´ã—ï¼š</strong>å¤–æ³¨è²»ç”¨ã®å‰Šæ¸›ã‚„æ¥­å‹™åŠ¹ç‡åŒ–ã‚’å†æ¤œè¨ã—ã¾ã—ã‚‡ã†</li>';
                recommendationsHTML += '<li>ğŸ’¡ <strong>å£²ä¸Šå‘ä¸Šç­–ï¼š</strong>å¤–æ³¨åŒ–ã¨åŒæ™‚ã«å£²ä¸Šã‚’ä¸Šã’ã‚‹æ–½ç­–ã‚’å¼·åŒ–ã—ã¾ã—ã‚‡ã†</li>';
            }
            
            if (data.paybackPeriod > 12) {
                recommendationsHTML += '<li>â° <strong>å›åæœŸé–“çŸ­ç¸®ï¼š</strong>åˆæœŸæŠ•è³‡ã‚’æŠ‘ãˆã€æ®µéšçš„ãªå¤–æ³¨åŒ–ã‚’æ¤œè¨ã—ã¾ã—ã‚‡ã†</li>';
            }
            
            if (data.efficiencyImprovement > 70) {
                recommendationsHTML += '<li>ğŸ¯ <strong>æ™‚é–“æ´»ç”¨è¨ˆç”»ï¼š</strong>ç©ºã„ãŸæ™‚é–“ã®æœ‰åŠ¹æ´»ç”¨ç­–ã‚’å…·ä½“çš„ã«è¨ˆç”»ã—ã¾ã—ã‚‡ã†</li>';
            }
            
            recommendationList.innerHTML = recommendationsHTML;
        }

        // åˆæœŸè¡¨ç¤ºç”¨ã®ã‚µãƒ³ãƒ—ãƒ«è¨ˆç®—
        document.addEventListener('DOMContentLoaded', function() {
            calculateROI();
        });
    </script>
</body>
</html>